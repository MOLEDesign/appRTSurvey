<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="initial-scale=1.0, user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<link rel="apple-touch-icon" href="apple-touch-icon.png" />
		
		<title>myQuestions</title>
		
		<!-- Fonts -->
		<link href='http://fonts.googleapis.com/css?family=Wendy+One|Libre+Baskerville' rel='stylesheet' type='text/css'>
		
		<!-- Style Sheets -->
		<link rel="stylesheet" href="assets/css/jquery.mobile.structure-1.3.1.min.css" />
		<link rel="stylesheet" href="assets/css/site.css" />
		<!-- End style sheets -->
		
		<!-- Scripts -->
		<script src="assets/js/jquery-1.9.1.min.js"></script>
		<script src="assets/js/jquery.mobile-1.2.0.min.js"></script>
		<script src="assets/js/scripts.js"></script>
		<!-- End scripts -->
	
	</head>
	<body>
		<div id="wrapper">
		</div>
	</body>
	
	<script id="wrappertpl" type="text/template">
			<div id="questionbox" style="background-color:#{{boxbackground}}; font-family:'{{textfont}}';">
				<form method="post" id="{{id}}" action="server/post.php" novalidate>
					<div id="header" style="font-family:'{{headerfont}}';"></div>
					<div id="questions"></div>
					<div id="footer"></div>
					<a href="#" id="prev_btn">&laquo;</a>
					<a href="#" id="next_btn">&raquo;</a>
				</form>
			</div>
	</script>
	
	<script id="headertpl" type="text/template">
			<div class="speaker">
				<h3>{{name}}</h3>
				<h4>{{startdate}} - {{enddate}}</h4>
				<p>{{description}}</p>
			</div>
	</script>
	
	<script id="questionstpl" type="text/template">
		{{#questions}}
			<div class="speaker">
			<label>{{qname}}</label>
			<p>
			
			{{#string}}
				<input	type="text"
						name ="{{qid}}"
						id="{{qid}}"
						required="{{required}}"
						length="{{length}}"
						maxlength="{{maxlength}}" />
			{{/string}}	
						
			{{#yesno}}
				<div class="onoffswitch">
					<input 	type="checkbox" 
							name="{{qid}}" 
							class="onoffswitch-checkbox" 
							id="myonoffswitch" checked>
					<label class="onoffswitch-label" for="myonoffswitch">
						<div class="onoffswitch-inner"></div>
						<div class="onoffswitch-switch"></div>
					</label>
				</div>				
			{{/yesno}}	
			
			{{#textarea}}
				<textarea	type="text"
							name="{{qid}}"
							id="{{qid}}"
							required="{{required}}"
							rows="{{rows}}"
							maxlength="{{maxlength}}" />
				</textarea>
			{{/textarea}}	
			
			{{#selectlst}}
				<select	name ="{{qid}}"
						required="{{required}}"
						size="{{size}}"
						{{#multiple}}multiple{{/multiple}}
						 >
						 {{#optionsls}}
							<option value="{{optionvalue}}"{{#selected}} selected{{/selected}}>{{optiontext}}</option>
						 {{/optionsls}}		 
				</select>
			{{/selectlst}}	
			
			{{#number}}
				<input	type="number"
						name ="{{qid}}"
						id="{{qid}}"
						required="{{required}}"
						length="{{length}}"
						maxlength="{{maxlength}}" />
			{{/number}}
			
			{{#radio}}
				{{#optionsls}}
				<input	name="{{qid}}"
						type="radio"
						required="{{required}}"
						size="{{size}}"
						value="{{optionvalue}}"
						 >{{optiontext}}
				</input><br />				 
				{{/optionsls}}		 
			{{/radio}}
			
			{{#submit}}
				<input	name="{{qid}}"
						type="submit"
						value="{{qname}}"
						 ><br />				 
			{{/submit}}	
			
			</p>
			</div>
		{{/questions}}	
	</script>
	
	<script id="footertpl" type="text/template">
			<div class="speaker">
			</div>
	</script>
	
	
	<script src="assets/js/jquery-1.9.1.min.js" type="text/javascript"></script>
	<script src="assets/js/jquery.cycle.all.min.js" type="text/javascript"></script>
	<script src="assets/js/mustache.min.js" type="text/javascript"></script>
	
	<script type="text/javascript">
	
	$(function() {
	
		$.getJSON('assets/content/managerconf2013.json', function(data) {
			var wrappertemplate = $('#wrappertpl').html();
			var headertemplate = $('#headertpl').html();
			var questionstemplate = $('#questionstpl').html();
			var footertemplate = $('#footertpl').html();
			
			var wrapperhtml = Mustache.to_html(wrappertemplate, data);
			$('#wrapper').html(wrapperhtml);
							
			var headerhtml = Mustache.to_html(headertemplate, data);
			$('#header').html(headerhtml);

			var html = Mustache.to_html(questionstemplate, data);
			$('#questions').html(html);
			
			$('#questions').cycle({
				fx: 'turnDown',
				pause: 1,
				next: '#next_btn',
				prev: '#prev_btn',
				speed: 500,
				timeout: 0
			});

			var footerhtml = Mustache.to_html(footertemplate, data);
			$('#footer').html(footerhtml);

			
		}); //getJSON
		
	}); //function
	
	</script>	
</html>